{% extends "main/layout.html" %}
{% load custom_filters %}
{% block title %}
    CollageVibs
{% endblock %}

{% block content %}
<div class="cv-home-container">
  <div onclick="goToGlobalChat()" class="cv-chat-box">
    <div class="cv-unread-bubble">3</div>
    <div class="cv-chat-content">
      <h1>Global Chat</h1>
      <p class="cv-chat-desc">Open space for all college students</p>
    </div>
    <div class="cv-online-count">{{ online_users_global }} online</div>
  </div>

  {% for club in clubs %}
    <div onclick="goToClubChat({{ club.id }})" class="cv-chat-box">
      <div class="cv-unread-bubble">5</div>
      <div class="cv-chat-content">
        <h2>{{ club.name }}</h2>
        <p class="cv-chat-desc">{{ club.description }}</p>
      </div>
      <div class="cv-online-count">
        {{ online_users_club|get_item:club.id }} online
      </div>
    </div>
  {% endfor %}
    <div onclick="openCreateClubModal()" class="cv-chat-box cv-add-new-box">
    <i data-lucide="plus"></i>
    </div>
</div>
<script>
function goToGlobalChat() {
    window.location.href = "{% url 'globalchat:global_chat' %}";
  }
function goToClubChat(clubId) {
    window.location.href = `/clubs/${clubId}`;
  }
function openCreateClubModal(){
    window.location.href = "{% url 'clubs:create_club' %}";
}

lucide.createIcons();



</script>
{% endblock %}

